<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Implicits Inspected and Explained</title>

		<meta name="description" content="Presentation for ScalaDays 2016">
		<meta name="author" content="Tim Soethout">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/ing.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/tomorrow.css">

		<!-- diagrams -->
		<link rel="stylesheet" href="css/mermaid.css">
		<script src="lib/js/mermaid.min.js"></script>

		<!-- TOC -->
		<!-- <link rel="stylesheet" href="plugin/presentable/presentable.min.css"> -->

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->

		<!-- some hacking to make it readable  -->
<style>
	.reveal section img {
		border: none;
		box-shadow: none;
	}

	.reveal .diagram-data {
		display: none;
	}
</style>
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides" >
				<section data-markdown>
					# Implicits Inspected and Explained

					ScalaDays New York 2016

					<!-- At the keynote at Scala Exchange Jessica Kerr mentioned that there is very much documentation for starting and expert Scala developers, but (almost) nothing in between. In this talk I want to demystify implicits.
Implicits are a fairly advanced feature and a very important aspect of the Scala language. They help with writing concise code and enable lots of DSLs. On the other side they can be very magical for an untrained eye. In this talk we will delve into idiomatic use cases of implicits and how the Scala compiler resolves them. If time allows we will jump into type classes as well. -->

					Tim Soethout

					http://blog.timmybankers.nl

					Note:
					- Welcome!
					- About Programming Language Scala and going into implicits, since this is magic for a lot of people
					- Many Scala users see implicits everywhere, but their exact use remains a bit magic
					- Goal of talk is to give you an intuition on how implicits work and where to look when things go haywire.
					- Target audience is Scala developers, who already know the language and syntax
					- Outline: Context, Implicits, Scoping, Typeclasses
					  </script>
				</section>

			<section>
				<section data-markdown>
					<script type="text/template">
					### Who am I?

					Tim Soethout
					- Functional programmer at heart
					- Scala/FP evangelist/trainer inside ING Bank

						![ING](image/ING_logo.png) <!-- .element: style="width:10em;" -->
					- PhD Candidate at CWI

						![ING](image/CWI.png)  <!-- .element: style="width:10em;" -->

					Note:
					- Bachelor CKI, Master Computing Science in Utrecht - Lot's of Haskell
					- Now Scala
					@ ING:
					- Popularising Functional Programming
						+ Scale out
						+ Scala => JVM
					- Lightbend/Typesafe certified trainer: Scala &amp; Akka
					- 3 courses
					@ CWI: Research institute in the Netherlands for Math and Computer Science

					Mention about ING:
					- Internal training each month, Scala in upcoming
					- If you want to know more, please come talk to me
					</script>
				</section>

				<!-- <section data-markdown> -->
				<!-- <script type="text/template">
					### Scala @ ![ING](image/ING_logo.png) .element: style="width:4em; margin: 0;" -->

					<!-- - Trainings each month (~10 new Scala/Akka devs)
					- Enthusiastic Scala Guild
					- ~4 full Scala applications in Production (Retail banking NL)
					- Internal reusable library on Scala and Finagle (embedded in lots of applications)
					- More and more departments starting, also for data science

					Note:
					- ING
						+ 52k employees worldwide, 40 countries
						+ NL 150+ DevOps teams
					- Monthly meetups
					- Sponsors of ScalaDays Amsterdam (2015) and Berlin (2016)
					- RAF, Coral, Calendar, Elements
					- Also used in non-dutch departments
				</script> -->
				<!-- </section> -->

			</section>



				<section>
					<section data-markdown>
						## Implicits
					</section>

					<section data-markdown>
						### What?

						- Use values without explicit reference
						- OO: _is a_ + _has a_
						- Implicits add: _is-viewable-as-a_
						- Loose Coupling, Tight Cohesion

						Note:
						- _is a_: extends
						- _has a_: members
						- Enables: Small core interfaces + rich views
					</section>
					<section data-markdown>
							### Implicits enable

							- DSLs
							- Passing around type evidence
							- Dependency Injection at Compile time
							- Reduce verbosity
							- Type classes
							- Extending libraries

							Note:
							- DSLs: reuse standard Scala types and collections by extending them with your library functions
							- Type evidence can help with creating more type safe interfaces, i.e. in Builders, constraint evidence
							- Pass in dependencies depending on which implicit is in scope
							- Less writing, more implicit
							- More:
								+ Akka ActorRef
								+ ExecutionContext (futures) - Threadpool management
								+ Generic Programming, shapeless
								+ Collections library Scala
					</section>

					<section data-markdown>
							### But beware

							- Complicated resolution rules
							- Automatic conversions

							Note:
							- Powerful, but can be magical in grasping, IDE support is really handy here
							- Simple lexical examination not always enough
							- Be careful with conversions, implicits can help, also when being explicit
								+ Semantics can be different (List to Stream)
							- If you do find yourself using implicits, always ask yourself if there is a way to achieve the same thing without their help.
					</section>

					<section data-markdown>
						### How?

						- Implicit conversions (a.k.a. Implicit views)
							```scala
							"abc".map(_.toInt)```
						- Implicit parameters
							```scala
							def method(implicit x : Int) = ...```
						- Implicit classes
							```scala
							implicit class X(y: Int)```
						- Implicit declarations
							```scala
							implicit val x = ...```

						Note:
						- `String` has no map defined => `StringOps` does
					</section>
					<section data-markdown>
						### Demo

						+ Implicit conversions
						+ Implicit parameters
						+ Implicit classes
						+ Implicit declarations

						Note:
						- `ImplicitParameter.sc`
						- `ImplicitConversion.sc`
						- `ImplicitClass.sc`
						- Explain about IDE support
					</section>
					</section>

					<section>
						<section data-markdown>
							## Scoping
						</section>
					<section data-markdown>
						### Odersky Explains

						Lookup precedence:
						1. By name only, without any prefix
						2. In "implicit scope":
							- companion/package object of
								+ the source type
								+ its parameters + supertype and supertraits

						Note:
						1. Visible as locals/members of enclosing classes and packages or as imports
						2. companion objects that bear some relation to the type
						- the importance is to be as general as possible without reverting to whole program analysis like Haskell does).
						- This is so that library developers can provide sensible defaults in Companion Objects and Package Objects and users can override those by importing or defining implicits in local scope
					</section>
					<section data-markdown>
						### Demo

						+ Scoping and resolving

						Note:
						- First show `scoping` package
						- `Scoping.sc`
					</section>
					<!-- <section data-markdown>
						### Outline

						- Manifestations of Implicits
							+ Implicit conversions -> implicit views
							+ Implicit parameters (http://www.lihaoyi.com/post/StrategicScalaStylePrincipleofLeastPower.html#implicit-method-parameter)
							+ Implicit val/var/defs
							+ Implicit (value) class
						- Use cases + how it works underneath
							+ javap
							+ use intellij to see whats where
								* command + shift + p - see what is used for implicit conversion
								* control + q - see what implicits are in scope for this value
							+ show implicits from predef in scope
						- Well known uses?
							+ `implicitly`
							+ Akka ActorRef
							+ ExecutionContext (futures)
							+ Dependency Injection
							+ Type classes
							+ Circe + Spray JSON etc
							+ Shapeless
							- Scalacheck - Arbitrary?
						- Utilities and tooling support (think of a better name)
						- Type classes
						- Ending

						Note:
						- http://www.cakesolutions.net/teamblogs/demystifying-implicits-and-typeclasses-in-scala
						- http://danielwestheide.com/blog/2013/02/06/the-neophytes-guide-to-scala-part-12-type-classes.html
						- http://stackoverflow.com/questions/5598085/where-does-scala-look-for-implicits - goede voorbeelden
						- https://vimeo.com/20308847
						- http://eed3si9n.com/revisiting-implicits-without-import-tax
						  + http://eed3si9n.com/implicit-parameter-precedence-again
						- Scala In Depth, the book
					</section> -->
				</section>

				<section>
					<section data-markdown>
						## Typeclasses
					</section>

					<section data-markdown>
						### Typeclass uses

						- Ad-hoc polymorphism
						- Extension of libraries

						Note:
						- Extending library without changing library code, loose coupling
						- Ad-hoc polymorphism, where you can pick and choose behaviour to be retrofitted to existing types.
						- Know from Haskell: Used to bring polymorphism to type level
						- Can be implemented in Scala using implicits
						- Example sort a collection if elements of collection are comparable
							+ Can be done by inheritance, interface etc
							+ But, static and only when writing the element type
							+ Basically extend the library
						- TODO: more background
					</section>

					<section data-markdown>
						### Demo

						Typeclass for JSON Serialisation
						- Naive with subtyping
						- Typeclass + improvements

						Note:
						- `typeclass/Naive.sc`
						- `typeclass/JsonSerializer.sc`
					</section>
				</section>

				<section>
					<section data-markdown>
						## Wrap up
					</section>
					<section data-markdown>
						<script type="text/template">
						### Recap

						- Implicits are powerful
						- Use your IDE
						- Implicit precedence: first look local, then in companion/package object
						- Typeclasses to extend libraries

						### Questions? <!-- .element: class="fragment" data-fragment-index="2" -->

						Note:
						- Use cases range from DSLs to extending libraries to full blown DI
						- Typeclasses, extend in Nonintrusive way
						 </script>
					</section>
				</section>
				<section data-markdown>
						### References

						[Slides](http://blog.timmybankers.nl/implicits-inspected-and-explained-slides)
						/
						[Code](https://github.com/TimSoethout/implicits-inspected-and-explained-slides/tree/gh-pages/code)

						- Scala documentation:
							+ [Java Converters](http://docs.scala-lang.org/overviews/collections/conversions-between-java-and-scala-collections.html)
							+ [Finding Implicits](http://docs.scala-lang.org/tutorials/FAQ/finding-implicits.html)
						- Book: [Scala In Depth](https://www.manning.com/books/scala-in-depth)
						- [Effective Scala](http://twitter.github.io/effectivescala/)
						- Blog [All Things Runnable](http://lalitpant.blogspot.nl/2008/08/scala-implicits-dose-of-magic-part-1.html)
						- [Scala Gitter channel](https://gitter.im/scala/scala), special thanks to @Ichoran and @@som-snytt
				</section>
			</div>

		</div>


		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,
				slideNumber: true,

				transition: 'convex', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					// { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/mermaid/mermaid.js' }
					// { src: 'plugin/presentable/presentable.min.js', callback: function() { presentable.toc({
					// 		framework: "revealjs",
					// 		// Untitled slides are excluded from TOC
					// 		hideNoTitle: true,
					// 		titles: "h2,.presentable-title",
					// });}}
				]
			});

		</script>

		<!-- <script>
			(function(){
				document.querySelector('.footer span').innerHTML = (document.querySelector('title').innerHTML);
			})();
		</script> -->
	</body>
</html>
